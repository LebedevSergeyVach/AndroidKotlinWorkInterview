# SDK

`compileSdk` и `targetSdk` — это два важных параметра в конфигурации Android-проекта, которые влияют на процесс компиляции и поведение приложения на устройствах. Давайте разберем их подробнее:

## compileSdk targetSdk minSdk

### compileSdk

**compileSdk** определяет версию Android API, которая используется для компиляции вашего приложения. Этот параметр указывает, какие API и библиотеки доступны вашему приложению во время компиляции.

#### Основные моменты:

1. **Доступ к новым API**: Более высокая версия `compileSdk` позволяет вам использовать новые API и функции, которые были добавлены в более поздних версиях Android.
2. **Компиляция**: Компилятор использует `compileSdk` для проверки, что ваш код соответствует API-интерфейсам этой версии. Если вы используете API, которые недоступны в указанной версии `compileSdk`, компиляция завершится ошибкой.
3. **Не влияет на поведение**: `compileSdk` не влияет на поведение приложения на устройствах с более низкой версией Android. Он только определяет, какие API доступны во время компиляции.

Пример:

```groovy
android {
    compileSdk 35

    defaultConfig {
        // Другие настройки
    }
}
```

---

### targetSdk

**targetSdk** определяет версию Android API, на которую ориентировано ваше приложение. Этот параметр указывает системе, что ваше приложение было протестировано на устройствах с этой версией Android и готово к использованию новых функций и изменений в поведении, которые были введены в эту версию.

#### Основные моменты:

1. **Поведение системы**: Более высокая версия `targetSdk` позволяет системе применять новые изменения в поведении, которые были введены в более поздних версиях Android. Например, изменения в обработке разрешений или поведении экрана блокировки.
2. **Оптимизация**: Установка `targetSdk` на более высокую версию может улучшить производительность и безопасность вашего приложения, так как система может оптимизировать работу с учетом новых функций.
3. **Совместимость**: Если `targetSdk` установлен на более высокую версию, чем версия Android на устройстве, где запущено приложение, система будет эмулировать поведение более старой версии, чтобы обеспечить совместимость.

Пример:

```groovy
android {
    compileSdk 35

    defaultConfig {
        targetSdk 35
        // Другие настройки
    }
}
```

---

### Сравнение

| Параметр     | Описание                                                    | Влияние на поведение приложения                                                    |
|--------------|-------------------------------------------------------------|------------------------------------------------------------------------------------|
| `compileSdk` | Версия Android API, используемая для компиляции приложения. | Не влияет на поведение на устройствах.                                             |
| `targetSdk`  | Версия Android API, на которую ориентировано приложение.    | Влияет на поведение на устройствах, включая новые функции и изменения в поведении. |

### Рекомендации

1. **Обновляйте `compileSdk` и `targetSdk` регулярно**: Чтобы использовать новые функции и улучшения, рекомендуется регулярно обновлять `compileSdk` и `targetSdk` до последних стабильных версий.
2. **Тестирование**: После обновления `targetSdk` обязательно протестируйте приложение на устройствах с новой версией Android, чтобы убедиться, что оно работает корректно.
3. **Совместимость**: Убедитесь, что ваше приложение совместимо с более старыми версиями Android, если вы поддерживаете их, используя `minSdk`.

### Пример конфигурации

```groovy
android {
    compileSdk 35

    defaultConfig {
        applicationId "com.your.app"
        minSdk 21
        targetSdk 35
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = '1.8'
    }
}
```

В этом примере `compileSdk` и `targetSdk` установлены на версию 35, что позволяет использовать новые API и функции, а также обеспечивает совместимость с устройствами на Android 35 и выше.

---

`minSdk` (минимальная версия SDK) — это еще один важный параметр в конфигурации Android-проекта, который определяет минимальную версию Android API, поддерживаемую вашим приложением. Этот параметр влияет на то, на каких устройствах ваше приложение может быть установлено и запущено.

### Основные моменты:

1. **Совместимость**: `minSdk` определяет минимальную версию Android, на которой ваше приложение может работать. Если устройство работает на версии Android ниже, чем указанная в `minSdk`, приложение не будет установлено на это устройство.
2. **Использование API**: Вы можете использовать API, которые доступны начиная с версии, указанной в `minSdk`. Если вы попытаетесь использовать API, которые недоступны в `minSdk`, компиляция завершится ошибкой.
3. **Адаптация**: Вам нужно адаптировать код, чтобы он корректно работал на устройствах с разными версиями Android. Это может включать использование условных операторов для проверки версии Android и выбора соответствующего кода.

### Пример:

```groovy
android {
    compileSdk 35

    defaultConfig {
        applicationId "com.your.app"
        minSdk 21
        targetSdk 35
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = '1.8'
    }
}
```

### Как использовать `minSdk` в коде:

Вы можете использовать `minSdk` для проверки версии Android во время выполнения и выполнения соответствующего кода. Например:

```kotlin
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    // Код, который работает только на Android 8.0 (Oreo) и выше
} else {
    // Код для более старых версий Android
}
```

### Рекомендации:

1. **Выбор `minSdk`**: Выбирайте `minSdk` на основе анализа вашей целевой аудитории. Если большинство ваших пользователей используют устройства с более новыми версиями Android, вы можете установить `minSdk` на более высокое значение.
2. **Адаптация**: Убедитесь, что ваше приложение корректно работает на всех версиях Android, начиная с `minSdk`. Используйте условные операторы и библиотеки, которые помогают адаптировать код для разных версий.
3. **Тестирование**: Проводите тестирование на устройствах с разными версиями Android, чтобы убедиться, что ваше приложение работает корректно на всех поддерживаемых версиях.

### Пример использования `minSdk` в коде:

```kotlin
fun checkNotificationChannel() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        // Создание NotificationChannel для Android 8.0 и выше
        val channel = NotificationChannel("channel_id", "Channel Name", NotificationManager.IMPORTANCE_DEFAULT)
        val notificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager
        notificationManager.createNotificationChannel(channel)
    } else {
        // Код для более старых версий Android
    }
}
```

В этом примере функция `checkNotificationChannel` проверяет версию Android и создает `NotificationChannel` только для устройств с Android 8.0 и выше. Для более старых версий Android выполняется другой код.

---

`minSdk` — это важный параметр, который определяет минимальную версию Android, поддерживаемую вашим приложением. Он влияет на совместимость приложения с устройствами и требует адаптации кода для работы на разных версиях Android. Выбор правильного значения `minSdk` и его использование в коде помогают обеспечить корректную работу приложения на всех поддерживаемых устройствах.